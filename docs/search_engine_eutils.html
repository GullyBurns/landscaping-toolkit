---

title: Search Engine Tools  


keywords: fastai
sidebar: home_sidebar

summary: "A library of classes that provide query access to a number of online academic search services including (Pubmed, PMC, and European PMC). "
description: "A library of classes that provide query access to a number of online academic search services including (Pubmed, PMC, and European PMC). "
nb_path: "05_search_engine_eutils.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 05_search_engine_eutils.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="NCBI-Tools">NCBI Tools<a class="anchor-link" href="#NCBI-Tools"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="NCBI_Database_Type" class="doc_header"><code>NCBI_Database_Type</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L25" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>Enum</code> = [pubmed, PMC]</p>
</blockquote>
<p>Simple enumeration of the different NCBI databases supported by this tool</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ESearchQuery" class="doc_header"><code>class</code> <code>ESearchQuery</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L32" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ESearchQuery</code>(<strong><code>api_key</code></strong>=<em><code>None</code></em>, <strong><code>oa</code></strong>=<em><code>False</code></em>, <strong><code>db</code></strong>=<em><code>'pubmed'</code></em>)</p>
</blockquote>
<p>Class to provide query interface for ESearch (i.e., query terms in elaborate ways, return a list of ids)
Each instance of this class executes queries of a given type</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ESearchQuery.__init__" class="doc_header"><code>ESearchQuery.__init__</code><a href="__main__.py#L34" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ESearchQuery.__init__</code>(<strong><code>api_key</code></strong>=<em><code>None</code></em>, <strong><code>oa</code></strong>=<em><code>False</code></em>, <strong><code>db</code></strong>=<em><code>'pubmed'</code></em>)</p>
</blockquote>
<p>:param api_key: API Key for NCBI EUtil Services 
:param oa: Is this query searching for open access papers? 
:param db: The database being queried</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ESearchQuery.execute_count_query" class="doc_header"><code>ESearchQuery.execute_count_query</code><a href="__main__.py#L80" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ESearchQuery.execute_count_query</code>(<strong><code>query</code></strong>)</p>
</blockquote>
<p>Executes a query on the target database and returns a count of papers</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ESearchQuery.execute_query_on_website" class="doc_header"><code>ESearchQuery.execute_query_on_website</code><a href="__main__.py#L104" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ESearchQuery.execute_query_on_website</code>(<strong><code>q</code></strong>, <strong><code>pm_order</code></strong>=<em><code>'relevance'</code></em>)</p>
</blockquote>
<p>Executes a query on the Pubmed database and returns papers in order of relevance or date.
This is important to determine accuracy of complex queries are based on the composition of the first page of results.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ESearchQuery.execute_query" class="doc_header"><code>ESearchQuery.execute_query</code><a href="__main__.py#L118" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ESearchQuery.execute_query</code>(<strong><code>query</code></strong>)</p>
</blockquote>
<p>Executes a query on the eutils service and returns data as a Pandas Dataframe</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="ESearchQuery.check_query_phrase" class="doc_header"><code>ESearchQuery.check_query_phrase</code><a href="__main__.py#L45" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>ESearchQuery.check_query_phrase</code>(<strong><code>phrase</code></strong>)</p>
</blockquote>
<p>Checks whether a phrase would work on Pubmed or would be expanded (which can lead to unpredictable errors). Use this as a check for synonyms.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="EFetchQuery" class="doc_header"><code>class</code> <code>EFetchQuery</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L184" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>EFetchQuery</code>(<strong><code>api_key</code></strong>=<em><code>None</code></em>, <strong><code>db</code></strong>=<em><code>'pubmed'</code></em>)</p>
</blockquote>
<p>Class to provide query interface for EFetch (i.e., query based on a list of ids)
Each instance of this class executes queries of a given type</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="EFetchQuery.__init__" class="doc_header"><code>EFetchQuery.__init__</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L190" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>EFetchQuery.__init__</code>(<strong><code>api_key</code></strong>=<em><code>None</code></em>, <strong><code>db</code></strong>=<em><code>'pubmed'</code></em>)</p>
</blockquote>
<p>:param api_key: API Key for NCBI EUtil Services
:param oa: Is this query searching for open access papers?
:param db: The database being queried</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="EFetchQuery.execute_efetch" class="doc_header"><code>EFetchQuery.execute_efetch</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L199" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>EFetchQuery.execute_efetch</code>(<strong><code>id</code></strong>)</p>
</blockquote>
<p>Executes a query for a single specific identifier</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="EFetchQuery.generate_data_frame_from_id_list" class="doc_header"><code>EFetchQuery.generate_data_frame_from_id_list</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L210" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>EFetchQuery.generate_data_frame_from_id_list</code>(<strong><code>id_list</code></strong>)</p>
</blockquote>
<p>Executes a query for a list of ID values</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="EFetchQuery.generate_mesh_data_frame_from_id_list" class="doc_header"><code>EFetchQuery.generate_mesh_data_frame_from_id_list</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L249" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>EFetchQuery.generate_mesh_data_frame_from_id_list</code>(<strong><code>id_list</code></strong>)</p>
</blockquote>
<p>Executes a query for MeSH data from a list of ID values</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="EuroPMCQuery">EuroPMCQuery<a class="anchor-link" href="#EuroPMCQuery"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="EuroPMCQuery" class="doc_header"><code>class</code> <code>EuroPMCQuery</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L368" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>EuroPMCQuery</code>(<strong><code>oa</code></strong>=<em><code>False</code></em>, <strong><code>db</code></strong>=<em><code>'pubmed'</code></em>)</p>
</blockquote>
<p>A class that executes search queries on the European PMC API</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="EuroPMCQuery.__init__" class="doc_header"><code>EuroPMCQuery.__init__</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L372" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>EuroPMCQuery.__init__</code>(<strong><code>oa</code></strong>=<em><code>False</code></em>, <strong><code>db</code></strong>=<em><code>'pubmed'</code></em>)</p>
</blockquote>
<p>Initialization of the class
:param oa:</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="EuroPMCQuery.run_empc_query" class="doc_header"><code>EuroPMCQuery.run_empc_query</code><a href="https://github.com/GullyBurns/czLandscapingTk/tree/master/czLandscapingTk/searchEngineUtils.py#L379" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>EuroPMCQuery.run_empc_query</code>(<strong><code>q</code></strong>, <strong><code>page_size</code></strong>=<em><code>1000</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Tests">Tests<a class="anchor-link" href="#Tests"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#df_test = pd.DataFrame(query)</span>
<span class="c1">#qt_test = QueryTranslator(df_test, &#39;ID&#39;, &#39;query&#39;)</span>
<span class="c1">#print(qt_test.generate_queries(QueryType.pubmed))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># uncomment if needed.</span>
<span class="kn">import</span> <span class="nn">urllib.parse</span> 
<span class="kn">from</span> <span class="nn">time</span> <span class="kn">import</span> <span class="n">time</span><span class="p">,</span> <span class="n">sleep</span>

<span class="c1">#esq = ESearchQuery()</span>
<span class="c1">#print(esq.execute_count_query(&quot;Primary Ciliary Dyskinesia&quot;))</span>
<span class="c1">#sleep(3) # Sleep for 3 seconds</span>
<span class="c1">#esq.execute_query(&quot;Primary Ciliary Dyskinesia&quot;)</span>

<span class="c1">#efq = EFetchQuery()</span>
<span class="c1">#sleep(3) # Sleep for 3 seconds</span>
<span class="c1">#efq.execute_efetch(35777446)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1">#epmcq = EuroPMCQuery()</span>
<span class="c1">#id_list, q_list = qt_test.generate_queries(QueryType.epmc)</span>
<span class="c1">#print(q_list)</span>
<span class="c1">#epmcq.run_empc_query(q_list[0])</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

</div>
 

